{"ast":null,"code":"var _jsxFileName = \"/Users/arthurfrancis/Documents/repo/imx-reactjs-integration-example/src/App.tsx\",\n  _s = $RefreshSig$();\nimport './App.css';\nimport { Link, ImmutableXClient, ProviderPreference, ETHTokenType } from '@imtbl/imx-sdk';\nimport { useEffect, useState } from 'react';\nimport Marketplace from './Marketplace';\nimport Inventory from './Inventory';\nimport Bridging from './Bridging';\nimport { generateWalletConnection } from './libs/walletConnection';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nrequire('dotenv').config();\nconst App = () => {\n  _s();\n  var _balance$balance;\n  // initialise Immutable X Link SDK\n  const link = new Link(process.env.REACT_APP_SANDBOX_LINK_URL);\n\n  // general\n  const [tab, setTab] = useState('marketplace');\n  const [wallet, setWallet] = useState('undefined');\n  const [balance, setBalance] = useState(Object);\n  const [client, setClient] = useState(Object);\n  useEffect(() => {\n    buildIMX();\n  }, []);\n\n  // initialise an Immutable X Client to interact with apis more easily\n  async function buildIMX() {\n    var _process$env$REACT_AP;\n    const publicApiUrl = (_process$env$REACT_AP = process.env.REACT_APP_SANDBOX_ENV_URL) !== null && _process$env$REACT_AP !== void 0 ? _process$env$REACT_AP : '';\n    setClient(await ImmutableXClient.build({\n      publicApiUrl\n    }));\n  }\n  async function clientTransfer() {\n    const walletConnection = await generateWalletConnection('goerli');\n    const imxClient = new ImmutableX(Config.SANDBOX);\n    try {\n      const transferResponse = await imxClient.transfer(walletConnection, {\n        receiver: '',\n        type: 'ETH',\n        amount: ''\n      });\n      console.log('transferResponse', transferResponse);\n    } catch (error) {\n      console.error(error);\n      process.exit(1);\n    }\n  }\n\n  // register and/or setup a user\n  async function linkSetup() {\n    const res = await link.setup({\n      providerPreference: ProviderPreference.METAMASK || ProviderPreference.MAGIC_LINK\n    });\n    console.log(res.starkPublicKey);\n    setWallet(res.address);\n    setBalance(await client.getBalance({\n      user: res.address,\n      tokenAddress: 'eth'\n    }));\n  }\n  ;\n  async function linkTransfer() {\n    try {\n      // Call the method\n      let result = await link.transfer([{\n        \"type\": ETHTokenType.ETH,\n        \"amount\": \"0.05\",\n        \"toAddress\": \"0xb512D1426219D0CBceAB18Efd2C29465f4B6C0BB\"\n      }]);\n      // Print the result\n      console.log(result);\n    } catch (error) {\n      // Catch and print out the error\n      console.error(error);\n    }\n  }\n  function handleTabs() {\n    if (client.address) {\n      switch (tab) {\n        case 'inventory':\n          if (wallet === 'undefined') return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Connect wallet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 46\n          }, this);\n          return /*#__PURE__*/_jsxDEV(Inventory, {\n            client: client,\n            link: link,\n            wallet: wallet\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 18\n          }, this);\n        case 'bridging':\n          if (wallet === 'undefined') return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Connect wallet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 46\n          }, this);\n          return /*#__PURE__*/_jsxDEV(Bridging, {\n            client: client,\n            link: link,\n            wallet: wallet\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 18\n          }, this);\n        default:\n          return /*#__PURE__*/_jsxDEV(Marketplace, {\n            client: client,\n            link: link\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 18\n          }, this);\n      }\n    }\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: linkSetup,\n      children: \"Setup\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Active wallet: \", wallet]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"ETH balance (in wei): \", balance === null || balance === void 0 ? void 0 : (_balance$balance = balance.balance) === null || _balance$balance === void 0 ? void 0 : _balance$balance.toString()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setTab('marketplace'),\n      children: \"Marketplace\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setTab('inventory'),\n      children: \"Inventory\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setTab('bridging'),\n      children: \"Deposit and Withdrawal\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setTab('transferclient'),\n      children: \"Transfer Client\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => linkTransfer(),\n      children: \"Transfer Client\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), handleTabs()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"/IUfmCrXQBP3ag6W7WhkoU3FisM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["Link","ImmutableXClient","ProviderPreference","ETHTokenType","useEffect","useState","Marketplace","Inventory","Bridging","generateWalletConnection","require","config","App","link","process","env","REACT_APP_SANDBOX_LINK_URL","tab","setTab","wallet","setWallet","balance","setBalance","Object","client","setClient","buildIMX","publicApiUrl","REACT_APP_SANDBOX_ENV_URL","build","clientTransfer","walletConnection","imxClient","ImmutableX","Config","SANDBOX","transferResponse","transfer","receiver","type","amount","console","log","error","exit","linkSetup","res","setup","providerPreference","METAMASK","MAGIC_LINK","starkPublicKey","address","getBalance","user","tokenAddress","linkTransfer","result","ETH","handleTabs","toString"],"sources":["/Users/arthurfrancis/Documents/repo/imx-reactjs-integration-example/src/App.tsx"],"sourcesContent":["import './App.css';\nimport { Link, ImmutableXClient, ImmutableMethodResults, ProviderPreference, ETHTokenType} from '@imtbl/imx-sdk';\nimport { useEffect, useState } from 'react';\nimport Marketplace from './Marketplace';\nimport Inventory from './Inventory';\nimport Bridging from './Bridging';\nimport { generateWalletConnection } from './libs/walletConnection';\nrequire('dotenv').config();\n\nconst App = () => {\n  // initialise Immutable X Link SDK\n  const link = new Link(process.env.REACT_APP_SANDBOX_LINK_URL)\n  \n  // general\n  const [tab, setTab] = useState('marketplace');\n  const [wallet, setWallet] = useState('undefined');\n  const [balance, setBalance] = useState<ImmutableMethodResults.ImmutableGetBalanceResult>(Object);\n  const [client, setClient] = useState<ImmutableXClient>(Object);\n\n\n  useEffect(() => {\n    buildIMX()\n  }, [])\n\n  // initialise an Immutable X Client to interact with apis more easily\n  async function buildIMX() {\n    const publicApiUrl: string = process.env.REACT_APP_SANDBOX_ENV_URL ?? '';\n    setClient(await ImmutableXClient.build({publicApiUrl}))\n  }\n\n  async function clientTransfer() {\n    const walletConnection = await generateWalletConnection('goerli');\n  \n    const imxClient = new ImmutableX(Config.SANDBOX);\n  \n    try {\n      const transferResponse = await imxClient.transfer(walletConnection, {\n        receiver: '',\n        type: 'ETH',\n        amount: '',\n      });\n  \n      console.log('transferResponse', transferResponse);\n    } catch (error) {\n      console.error(error);\n      process.exit(1);\n    }\n  }\n\n  // register and/or setup a user\n  async function linkSetup(): Promise<void> {\n    const res = await link.setup({providerPreference: ProviderPreference.METAMASK || ProviderPreference.MAGIC_LINK})\n    console.log(res.starkPublicKey)\n    setWallet(res.address)\n    setBalance(await client.getBalance({user: res.address, tokenAddress: 'eth'}))\n  };\n\n  async function linkTransfer() {\n    try{\n      // Call the method\n      let result = await link.transfer([\n        {\n            \"type\": ETHTokenType.ETH,\n            \"amount\": \"0.05\",\n            \"toAddress\": \"0xb512D1426219D0CBceAB18Efd2C29465f4B6C0BB\"\n        }\n      ])\n      // Print the result\n      console.log(result)\n    }catch(error){\n      // Catch and print out the error\n      console.error(error)\n    }\n  }\n\n  function handleTabs() {\n    if (client.address) {\n      switch (tab) {\n        case 'inventory':\n          if (wallet === 'undefined') return <div>Connect wallet</div>\n          return <Inventory\n            client={client}\n            link={link}\n            wallet={wallet}\n          />\n        case 'bridging':\n          if (wallet === 'undefined') return <div>Connect wallet</div>\n          return <Bridging\n            client={client}\n            link={link}\n            wallet={wallet}\n          />\n        default:\n          return <Marketplace\n            client={client}\n            link={link}\n          />\n      }\n    }\n    return null\n  }\n\n  return (\n    <div className=\"App\">\n      <button onClick={linkSetup}>Setup</button>\n      <div>\n        Active wallet: {wallet}\n      </div>\n      <div>\n        ETH balance (in wei): {balance?.balance?.toString()}\n      </div>\n      <button onClick={() => setTab('marketplace')}>Marketplace</button>\n      <button onClick={() => setTab('inventory')}>Inventory</button>\n      <button onClick={() => setTab('bridging')}>Deposit and Withdrawal</button>\n      <button onClick={() => setTab('transferclient')}>Transfer Client</button>\n      <br/><br/>\n      <button onClick={() => linkTransfer()}>Transfer Client</button>\n      <br/>\n      {handleTabs()}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}